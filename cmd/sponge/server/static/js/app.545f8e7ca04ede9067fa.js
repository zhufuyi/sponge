webpackJsonp([1],{"2Z4z":function(e,t){},"3Eg5":function(e,t){},"3z25":function(e,t){},"4OiW":function(e,t){},"7Kud":function(e,t){},"7O3S":function(e,t){},FNpW:function(e,t){},FygU:function(e,t){},GhH6:function(e,t){},I0o5:function(e,t){},IyL6:function(e,t){},KbEY:function(e,t){},Li7Y:function(e,t){},Ll2J:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("7+uW"),i={name:"App",data:function(){return{isCollapse:!1,collapseSize:"300px",toggle:!1,block:!0,collapsebgcolor:"",dialogTableVisible:!1,logoImageSrc:o("hIB5"),logoImagePosition:"15%",wechatImageSrc:o("ebUW"),currentMenu:"/ui",languageOptions:[{value:"English",label:"English"},{value:"ç®€ä½“ä¸­æ–‡",label:"ç®€ä½“ä¸­æ–‡"}],languageValue:"ç®€ä½“ä¸­æ–‡",homeRoute:"/ui",webHttpRoute:"/ui/web-http",webHandlerRoute:"/ui/web-handler",webCacheRoute:"/ui/web-cache",webDaoRoute:"/ui/web-dao",webModelRoute:"/ui/web-model",microRPCRoute:"/ui/micro-rpc",microServiceRoute:"/ui/micro-service",microServiceHandlerRoute:"/ui/micro-service-handler",microRPCConnRoute:"/ui/micro-rpc-conn",microRPCPbRoute:"/ui/micro-rpc-pb",microGRPCHTTPPbRoute:"/ui/micro-grpc-http-pb",microRPCGwPbRoute:"/ui/micro-rpc-gw-pb",microProtobufRoute:"/ui/micro-protobuf",webHTTPPbRoute:"/ui/web-http-pb",yamlConfigRoute:"/ui/yaml-config",downloadCodeRoute:"/ui/download"}},watch:{$route:function(e){this.currentMenu=e.path}},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},created:function(){"en"==localStorage.getItem("localeLanguage")?(this.$i18n.locale="en",this.languageValue="English"):(this.$i18n.locale="cn",this.languageValue="ç®€ä½“ä¸­æ–‡"),this.adaptedRouteByLanguage(),this.currentMenu=this.$route.path,window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(e){this.fullWidth=document.documentElement.clientWidth},handleSelect:function(e,t){},handleOpen:function(e,t){},handleClose:function(e,t){},clickHandle:function(e){},collapseStatus:function(){this.toggle=!this.toggle,this.block=!this.block,this.isCollapse=!this.isCollapse,this.isCollapse?(this.collapseSize="0px",this.logoImagePosition="0%"):(this.collapseSize="300px",this.logoImagePosition="15%")},changebgcolor:function(){this.collapsebgcolor="#66B1FF"},clearcolor:function(){this.collapsebgcolor=""},changeLanguage:function(e){this.languageValue=e,"ç®€ä½“ä¸­æ–‡"===e?(this.$i18n.locale="cn",localStorage.setItem("localeLanguage","cn")):(this.$i18n.locale="en",localStorage.setItem("localeLanguage","en")),this.adaptedRouteByLanguage(),this.$router.push(this.homeRoute),window.location.reload()},adaptedRouteByLanguage:function(){var e="";"en"==this.$i18n.locale&&(e="/en"),this.homeRoute=e+this.homeRoute.replace("/en",""),this.webHttpRoute=e+this.webHttpRoute.replace("/en",""),this.webHandlerRoute=e+this.webHandlerRoute.replace("/en",""),this.webCacheRoute=e+this.webCacheRoute.replace("/en",""),this.webDaoRoute=e+this.webDaoRoute.replace("/en",""),this.webModelRoute=e+this.webModelRoute.replace("/en",""),this.microRPCRoute=e+this.microRPCRoute.replace("/en",""),this.microRPCConnRoute=e+this.microRPCConnRoute.replace("/en",""),this.microRPCPbRoute=e+this.microRPCPbRoute.replace("/en",""),this.microGRPCHTTPPbRoute=e+this.microGRPCHTTPPbRoute.replace("/en",""),this.microRPCGwPbRoute=e+this.microRPCGwPbRoute.replace("/en",""),this.microServiceRoute=e+this.microServiceRoute.replace("/en",""),this.microServiceHandlerRoute=e+this.microServiceHandlerRoute.replace("/en",""),this.microProtobufRoute=e+this.microProtobufRoute.replace("/en",""),this.webHTTPPbRoute=e+this.webHTTPPbRoute.replace("/en",""),this.yamlConfigRoute=e+this.yamlConfigRoute.replace("/en",""),this.downloadCodeRoute=e+this.downloadCodeRoute.replace("/en","")},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0,this.logoImagePosition="0%"):(this.spanSize=16,this.offsetSize=4,this.logoImagePosition="15%")}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",[o("el-container",[o("el-header",{staticStyle:{height:"100px","border-bottom":"2px solid #eee"}},[o("div",{staticClass:"header-image",style:{"padding-left":e.logoImagePosition}},[o("el-image",{staticStyle:{height:"50px"},attrs:{src:e.logoImageSrc}})],1),e._v(" "),o("div",{staticClass:"menuControl",style:{"background-color":e.collapsebgcolor},on:{mouseenter:e.changebgcolor,mouseleave:e.clearcolor,click:e.collapseStatus}},[o("div",{staticStyle:{"text-align":"center","padding-top":"5px"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:e.block,expression:"block"}],staticClass:"el-icon-s-fold"}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],staticClass:"el-icon-s-unfold"})])]),e._v(" "),o("div",{staticStyle:{float:"right","margin-top":"-20px"}},[o("el-select",{staticClass:"languageClass",on:{change:e.changeLanguage},model:{value:e.languageValue,callback:function(t){e.languageValue=t},expression:"languageValue"}},e._l(e.languageOptions,function(e){return o("el-option",{key:e.value,staticStyle:{"font-size":"medium"},attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),o("el-container",[o("el-aside",{staticClass:"aside-menu",attrs:{width:e.collapseSize}},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"$router.currentRoute.path","default-active":e.currentMenu,collapse:e.isCollapse},on:{select:e.handleSelect,open:e.handleOpen,close:e.handleClose}},[o("el-menu-item",{attrs:{index:e.homeRoute}},[o("i",{staticClass:"el-icon-s-home"}),e._v(" "),o("span",{staticClass:"home-class",attrs:{slot:"title"},slot:"title"},[e._v("Home")])]),e._v(" "),o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-coin"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("SQL")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHttpRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttp"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpc"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-tickets"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Protobuf")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttpPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microrpcPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCGwPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcGwPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microGRPCHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microGRPCHTTPPb"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"3"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-suitcase"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Public")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.wehHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microService"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microServiceHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webDaoRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webDao"))+" ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microProtobufRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microProtobuf"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webModelRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webModel"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.yamlConfigRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.yamlConfig"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCConnRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcConn"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webCacheRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webCache"))+"\n                ")])])],2)],1)],1),e._v(" "),o("el-container",[o("el-main",[o("router-view")],1),e._v(" "),o("el-footer",[o("div",{staticStyle:{"text-align":"center",position:"relative"}},[o("p",{staticStyle:{"font-style":"italic","font-size":"medium",color:"#666"}},[e._v("\n                "+e._s(e.$t("footer.text1"))+"\n                "),o("a",{attrs:{href:"https://github.com/zhufuyi/sponge",target:"_blank"}},[e._v("\n                  starâ­")]),e._v("\n                "+e._s(e.$t("footer.text2"))+"\n                "),o("el-button",{staticStyle:{"font-size":"medium"},attrs:{type:"text"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v(e._s(e.$t("footer.text3")))])],1),e._v(" "),o("el-dialog",{attrs:{title:"åŠ å¾®ä¿¡è¿›ç¾¤(æ ‡æ³¨sponge)",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[o("el-image",{staticStyle:{height:"320px"},attrs:{src:e.wechatImageSrc}})],1)],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var a=o("VU/8")(i,l,!1,function(e){o("Ll2J")},"data-v-f74ad42e",null).exports,s=o("/ocq"),n={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),mircoServiceFrameworkImageSrc:o("qynW")}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"50px","line-height":"150%"}},[e._v("\n      "+e._s(e.$t("home.text1"))+"\n    ")]),e._v(" "),o("p",[e._v("\n      "+e._s(e.$t("home.text2"))),o("a",{attrs:{href:"https://github.com/zhufuyi/sponge",target:"_blank"}},[e._v("https://github.com/zhufuyi/sponge")])]),e._v(" "),o("p",[e._v("\n      "+e._s(e.$t("home.text3"))),o("a",{attrs:{href:"https://go-sponge.com/zh-cn/",target:"_blank"}},[e._v("https://go-sponge.com/zh-cn/")])]),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text4")))]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text5")))]),e._v(" "),o("div",{staticClass:"microservices-image"},[o("el-image",{attrs:{src:e.mircoServiceFrameworkImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var d=o("VU/8")(n,c,!1,function(e){o("wUZd")},null,null).exports,m=o("mtWM"),u={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var i=this,l={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,l,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,l=o["content-disposition"],a=new Blob([t],{type:o["content-type"]}),s=document.createElement("a"),n=window.URL.createObjectURL(a);s.href=n,s.download=decodeURI(l),s.style.display="none",document.body.appendChild(s),s.click(),s.parentNode.removeChild(s),window.URL.revokeObjectURL(n),i.dialogContent=r,i.downloadStatusDialogVisible=!0,i.$emit("update-is-downloading",!1)}).catch(function(e){console.log(e);var t=e.response.headers;""!=t["err-msg"]?i.$message.error(t["err-msg"]):i.$message.error(e.message),i.$emit("update-is-downloading",!1)})}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"ä¸‹è½½æˆåŠŸ",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("ä½¿ç”¨å¸®åŠ©ï¼š")]),e._v(" "),o("div",{staticStyle:{padding:"5px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var v=o("VU/8")(u,p,!1,function(e){o("FNpW")},"data-v-4398b9d2",null).exports,b=o("bOdI"),f=o.n(b),h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"å•ä½“åº”ç”¨å•ä»“åº“(monolith)æˆ–å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„",top:"7vh",width:"60%",visible:e.isShowMutiDialog},on:{"update:visible":function(t){e.isShowMutiDialog=t}}},[o("pre",[e._v(e._s(e.mutiRepoText))])]),e._v(" "),o("el-dialog",{attrs:{title:"å¾®æœåŠ¡å•ä»“åº“(mono-repo)ç›®å½•ç»“æ„(ä¹Ÿå°±æ˜¯å¤§ä»“åº“ç›®å½•ç»“æ„)",width:"66%",visible:e.isShowMonoDialog},on:{"update:visible":function(t){e.isShowMonoDialog=t}}},[o("pre",[e._v(e._s(e.monoRepoText))])])],1)},staticRenderFns:[]};var g=o("VU/8")({name:"ShowRepoDir",computed:{mutiRepoFormattedText:function(){return this.mutiRepoText.replace(/\n/g,"<br>")}},data:function(){return{isShowMutiDialog:!1,isShowMonoDialog:!1,mutiRepoText:" .\nâ”œâ”€â”€ api            # protobufæ–‡ä»¶å’Œç”Ÿæˆçš„*pb.goç›®å½•\nâ”œâ”€â”€ assets         # å…¶ä»–ä¸èµ„æºåº“ä¸€èµ·ä½¿ç”¨çš„èµ„äº§(å›¾ç‰‡ã€logoç­‰)ç›®å½•\nâ”œâ”€â”€ cmd            # ç¨‹åºå…¥å£ç›®å½•\nâ”œâ”€â”€ configs        # é…ç½®æ–‡ä»¶çš„ç›®å½•\nâ”œâ”€â”€ deployments    # è£¸æœºã€dockerã€k8séƒ¨ç½²è„šæœ¬ç›®å½•\nâ”œâ”€â”€ docs           # è®¾è®¡æ–‡æ¡£å’Œç•Œé¢æ–‡æ¡£ç›®å½•\nâ”œâ”€â”€ internal       # ä¸šåŠ¡é€»è¾‘ä»£ç ç›®å½•\nâ”‚    â”œâ”€â”€ cache        # åŸºäºä¸šåŠ¡åŒ…è£…çš„ç¼“å­˜ç›®å½•\nâ”‚    â”œâ”€â”€ config       # Goç»“æ„çš„é…ç½®æ–‡ä»¶ç›®å½•\nâ”‚    â”œâ”€â”€ dao          # æ•°æ®è®¿é—®ç›®å½•\nâ”‚    â”œâ”€â”€ ecode        # è‡ªå®šä¹‰ä¸šåŠ¡é”™è¯¯ä»£ç ç›®å½•\nâ”‚    â”œâ”€â”€ handler      # httpçš„ä¸šåŠ¡åŠŸèƒ½å®ç°ç›®å½•\nâ”‚    â”œâ”€â”€ model        # æ•°æ®åº“æ¨¡å‹ç›®å½•\nâ”‚    â”œâ”€â”€ routers      # httpè·¯ç”±ç›®å½•\nâ”‚    â”œâ”€â”€ rpcclient    # è¿æ¥grpcæœåŠ¡çš„å®¢æˆ·ç«¯ç›®å½•\nâ”‚    â”œâ”€â”€ server       # æœåŠ¡å…¥å£ï¼ŒåŒ…æ‹¬httpã€grpcç­‰\nâ”‚    â”œâ”€â”€ service      # grpcçš„ä¸šåŠ¡åŠŸèƒ½å®ç°ç›®å½•\nâ”‚    â””â”€â”€ types        # httpçš„è¯·æ±‚å’Œå“åº”ç±»å‹ç›®å½•\nâ”œâ”€â”€ pkg            # å¤–éƒ¨åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨çš„åº“ç›®å½•\nâ”œâ”€â”€ scripts        # æ‰§è¡Œè„šæœ¬ç›®å½•\nâ”œâ”€â”€ test           # é¢å¤–çš„å¤–éƒ¨æµ‹è¯•ç¨‹åºå’Œæµ‹è¯•æ•°æ®\nâ”œâ”€â”€ third_party    # ä¾èµ–ç¬¬ä¸‰æ–¹protobufæ–‡ä»¶æˆ–å…¶ä»–å·¥å…·çš„ç›®å½•\nâ”œâ”€â”€ Makefile       # å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ç›¸å…³çš„å‘½ä»¤é›†åˆ\nâ”œâ”€â”€ go.mod         # go æ¨¡å—ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶\nâ””â”€â”€ go.sum         # go æ¨¡å—ä¾èµ–é¡¹çš„å¯†é’¥å’Œæ ¡éªŒæ–‡ä»¶\n      ",monoRepoText:" .\nâ”œâ”€â”€ api\nâ”‚    â”œâ”€â”€ server1       # æœåŠ¡1çš„protobufæ–‡ä»¶å’Œç”Ÿæˆçš„*pb.goç›®å½•\nâ”‚    â”œâ”€â”€ server2       # æœåŠ¡2çš„protobufæ–‡ä»¶å’Œç”Ÿæˆçš„*pb.goç›®å½•\nâ”‚    â”œâ”€â”€ server3       # æœåŠ¡3çš„protobufæ–‡ä»¶å’Œç”Ÿæˆçš„*pb.goç›®å½•\nâ”‚    â””â”€â”€ ...\nâ”œâ”€â”€ server1        # æœåŠ¡1çš„ä»£ç ç›®å½•ï¼Œä¸å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„åŸºæœ¬ä¸€æ ·\nâ”œâ”€â”€ server2        # æœåŠ¡2çš„ä»£ç ç›®å½•ï¼Œä¸å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„åŸºæœ¬ä¸€æ ·\nâ”œâ”€â”€ server3        # æœåŠ¡3çš„ä»£ç ç›®å½•ï¼Œä¸å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„åŸºæœ¬ä¸€æ ·\nâ”œâ”€â”€ ...\nâ”œâ”€â”€ third_party    # ä¾èµ–çš„ç¬¬ä¸‰æ–¹protobufæ–‡ä»¶\nâ”œâ”€â”€ go.mod         # go æ¨¡å—ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶\nâ””â”€â”€ go.sum         # go æ¨¡å—ä¾èµ–é¡¹çš„å¯†é’¥å’Œæ ¡éªŒå’Œæ–‡ä»¶\n\n"}}},h,!1,function(e){o("rL66")},"data-v-a0f785e8",null).exports,_={name:"WebHTTP",data:function(){var e;return{title:"",path:"web-http",helpInfo:'\n      <p><b>â“µåŸºäºsqlåˆ›å»ºçš„webæœåŠ¡</b> ç”Ÿæˆäº†åŒ…æ‹¬äº†CRUD apiçš„å®Œæ•´webæœåŠ¡åç«¯ä»£ç ï¼Œè¯¦ç»†çš„å¼€å‘æµç¨‹è¯·æŸ¥çœ‹æ–‡æ¡£ <a href="https://go-sponge.com/zh-cn/web-development-sql" target="_blank">webæœåŠ¡å¼€å‘(sql)</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆswaggeræ–‡æ¡£:  <b style="color: green">make docs</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>ï¼Œæµ‹è¯• CRUD apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:(e={dsnAddr:"",dbDriver:"",tableName:[]},f()(e,"dbDriver",""),f()(e,"moduleName",""),f()(e,"serverName",""),f()(e,"projectName",""),f()(e,"repoAddr",""),f()(e,"embed",!1),f()(e,"suitedMonoRepo",!1),f()(e,"isExtendedApi",!1),e),rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},y={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/zh-cn/web-development-sql",target:"_blank"}},[e._v("â“µåŸºäºsqlåˆ›å»ºwebæœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          ç”Ÿæˆå®Œæ•´çš„webæœåŠ¡åç«¯ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä»¥åå¦‚æœéœ€è¦æ·»åŠ æ–°çš„CRUDä»£ç ï¼Œå¯ä»¥åœ¨èœå•"),o("br"),o("b",[e._v("ã€Publicã€‘ -> ã€ç”Ÿæˆhandler CRUDä»£ç ã€‘")]),o("br"),e._v("\n              ä¸­ç”Ÿæˆä»£ç ï¼Œç„¶åç§»åŠ¨åˆ°é¡¹ç›®ä»£ç ä¸­ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"dockeré•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              dockeré•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»ºdockeré•œåƒã€k8sçš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨dockerå®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œdockerä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              gitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var w=o("VU/8")(_,y,!1,function(e){o("X1EN")},"data-v-4a5ad9b8",null).exports,F={name:"WebHandler",data:function(){return{title:"ç”Ÿæˆhandler CRUDä»£ç ",path:"web-handler",helpInfo1:'\n      <p>åŸºäºsqlç”Ÿæˆçš„handlerä»£ç ï¼ŒåŒ…å«äº†http apiçš„CRUDã€åˆ†é¡µæŸ¥è¯¢ã€è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ã€ç¼“å­˜ç­‰ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°ä¸€ä¸ª<b>â“µåŸºäºsqlåˆ›å»ºçš„webæœåŠ¡</b>é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤:  <b style="color: green">make docs</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>ï¼Œæµ‹è¯• CRUD apiã€‚</p>\n      ',helpInfo2:'\n      <p>åŸºäºsqlç”Ÿæˆçš„protobufå’Œhandlerä»£ç ï¼ŒåŒ…å«äº†http apiçš„CRUDã€åˆ†é¡µæŸ¥è¯¢ã€è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ã€ç¼“å­˜ç­‰ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>api</b>å’Œ<b>internal</b>ç§»åŠ¨åˆ°ä¸€ä¸ª<b>â“·åŸºäºprotobufåˆ›å»ºçš„webæœåŠ¡</b>é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤:  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯• CRUDapiã€‚</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;t.helpInfo=t.helpInfo2,i="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;i="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},C={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"medium"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº”go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"protobufç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœå…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„handler\n              CRUDä»£ç åªé€‚åˆ"'),o("b",[e._v("â“µåŸºäºsqlåˆ›å»ºçš„webæœåŠ¡")]),e._v('"çš„é¡¹ç›®ä»£ç ï¼Œ'),o("br"),e._v('\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„handler\n              CRUDä»£ç åªé€‚åˆ"'),o("b",[e._v("â“·åŸºäºprotobufåˆ›å»ºçš„webæœåŠ¡")]),e._v('"çš„é¡¹ç›®ä»£ç ã€‚\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var D=o("VU/8")(F,C,!1,function(e){o("tuuv")},"data-v-699fdb8e",null).exports,S={name:"WebCache",data:function(){return{title:"ç”Ÿæˆcacheä»£ç ",path:"web-cache",helpInfo:"\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1,isNeedCustomKeyPrefix:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],cacheName:[{required:!0,message:"è¯·è¾“å…¥ç¼“å­˜åç§°",trigger:"blur"}],keyName:[{required:!0,message:"è¯·è¾“å…¥keyåç§°",trigger:"blur"}],keyType:[{required:!0,message:"è¯·é€‰æ‹©keyçš„goç±»å‹",trigger:"blur"}],valueName:[{required:!0,message:"è¯·è¾“å…¥valueåç§°",trigger:"blur"}],valueType:[{required:!0,message:"è¯·é€‰æ‹©valueçš„goç±»å‹",trigger:"blur"}]},keyTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}],valueTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}]}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(""==t.ruleForm.keyType)return t.$message.error("keyçš„goç±»å‹ä¸èƒ½ä¸ºç©º"),!1;if(""==t.ruleForm.valueType)return t.$message.error("valueçš„goç±»å‹ä¸èƒ½ä¸ºç©º"),!1;if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥moduleåç§°"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº”go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"ç¼“å­˜åç§°",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),e.ruleForm.isNeedCustomKeyPrefix?o("el-form-item",{attrs:{label:"ç¼“å­˜keyå‰ç¼€",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ user:token"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"keyåç§°",prop:"keyName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"keyçš„goç±»å‹",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType",t)},expression:"ruleForm.keyType"}},e._l(e.keyTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"valueåç§°",prop:"valueName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"valueçš„goç±»å‹",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType",t)},expression:"ruleForm.valueType"}},e._l(e.valueTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"è‡ªå®šä¹‰ç¼“å­˜keyå‰ç¼€"}},[o("el-switch",{model:{value:e.ruleForm.isNeedCustomKeyPrefix,callback:function(t){e.$set(e.ruleForm,"isNeedCustomKeyPrefix",t)},expression:"ruleForm.isNeedCustomKeyPrefix"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              åœ¨ç¼“å­˜æœåŠ¡ä¸­å­˜å‚¨çš„keyåç§°é»˜è®¤æ˜¯\n              "),o("b",[e._v("ç¼“å­˜åç§°:keyå€¼")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯æ­¤é€‰é¡¹ï¼Œè®¾ç½®è‡ªå®šä¹‰çš„ç¼“å­˜keyå‰ç¼€ï¼Œ"),o("br"),e._v("keyåç§°å°†å˜ä¸º\n              "),o("b",[e._v("è‡ªå®šä¹‰ç¼“å­˜keyå‰ç¼€:keyå€¼")]),e._v("ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var N=o("VU/8")(S,x,!1,function(e){o("2Z4z")},"data-v-e9641e8a",null).exports,k={name:"WebDao",data:function(){return{title:"ç”Ÿæˆdao CRUDä»£ç ",path:"web-dao",helpInfo:"\n      <p>åŸºäºè¡¨sqlç”Ÿæˆdaoä»£ç ï¼ŒåŒ…å«äº†è¡¨çš„CRUDæ“ä½œã€åˆ†é¡µæŸ¥è¯¢ã€è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ã€ç¼“å­˜ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. åœ¨handleræˆ–serviceè°ƒç”¨daoä»£ç ã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;i="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},R={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº”go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var z=o("VU/8")(k,R,!1,function(e){o("wAci")},"data-v-4da86b46",null).exports,A={name:"WebModel",data:function(){return{title:"ç”ŸæˆModelä»£ç ",path:"web-model",helpInfo:"\n      <p>åŸºäºè¡¨sqlç”Ÿæˆå¯¹åº”goçš„ç»“æ„ä½“ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var $=o("VU/8")(A,q,!1,function(e){o("FygU")},"data-v-029ae93d",null).exports,M={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>â“¶åŸºäºsqlåˆ›å»ºgrpcæœåŠ¡</b> ç”Ÿæˆäº†åŒ…æ‹¬äº†CRUD apiçš„å®Œæ•´å¾®æœåŠ¡ä»£ç ï¼Œè¯¦ç»†çš„å¼€å‘æµç¨‹è¯·æŸ¥çœ‹æ–‡æ¡£ <a href="https://go-sponge.com/zh-cn/microservice-development-sql" target="_blank">grpcæœåŠ¡å¼€å‘(sql)</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. ä½¿ç”¨ <b>Goland</b> æˆ– <b>VS Code</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–è€…å‹æµ‹apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},T={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/zh-cn/microservice-development-sql",target:"_blank"}},[e._v("â“¶åŸºäºsqlåˆ›å»ºgrpcæœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          ç”Ÿæˆå®Œæ•´çš„å¾®æœåŠ¡é¡¹ç›®ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä»¥åå¦‚æœéœ€è¦æ·»åŠ æ–°çš„CRUDä»£ç ï¼Œå¯ä»¥åœ¨èœå•"),o("br"),o("b",[e._v("ã€Publicã€‘ -> ã€ç”Ÿæˆservice CRUDä»£ç ã€‘")]),o("br"),e._v("ä¸­ç”Ÿæˆä»£ç ï¼Œç„¶åç§»åŠ¨åˆ°é¡¹ç›®ä»£ç ä¸­ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"dockeré•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              dockeré•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»ºdockeré•œåƒã€k8sçš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨dockerå®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œdockerä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              gitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var I=o("VU/8")(M,T,!1,function(e){o("7Kud")},"data-v-f0ef8ccc",null).exports,P={name:"MicroRPCConn",data:function(){return{title:"ç”ŸæˆgrpcæœåŠ¡è¿æ¥ä»£ç ",path:"micro-rpc-conn",helpInfo:"\n      <p>grpcæœåŠ¡è¿æ¥ä»£ç åŒ…æ‹¬å¸¸ç”¨æœåŠ¡æ²»ç†åŠŸèƒ½ï¼Œä¾‹å¦‚æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€é™æµã€ç†”æ–­ã€é“¾è·¯è·Ÿè¸ªç­‰ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],rpcServerNames:[{required:!0,message:"è¯·è¾“å…¥grpcæœåŠ¡åç§°",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},W={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥moduleåç§°"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°useræœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™useræœåŠ¡å¯¹åº”go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"grpcæœåŠ¡åç§°",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"æ”¯æŒå¡«å†™å¤šä¸ªgrpcæœåŠ¡åç§°"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæƒ³ç”Ÿæˆè¿æ¥å¤šä¸ªgrpcæœåŠ¡ä»£ç ï¼Œ"),o("br"),e._v("\n              å¤šä¸ªgrpcæœåŠ¡åç§°ä¹‹é—´ç”¨"),o("b",[e._v("é€—å·")]),e._v("åˆ†éš”ã€‚"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šcomment,relation\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var E=o("VU/8")(P,W,!1,function(e){o("Li7Y")},"data-v-40a38e3a",null).exports,U={name:"MicroService",data:function(){return{title:"ç”Ÿæˆservice CRUDä»£ç ",path:"micro-service",helpInfo:'\n      <p>åŸºäºè¡¨sqlç”Ÿæˆçš„serviceä»£ç ï¼ŒåŒ…å«äº†è¡¨çš„grpc apiçš„CRUDå’Œæµ‹è¯•ä»£ç ï¼Œæ”¯æŒåˆ†é¡µã€è¿‡æ»¤ã€æ’åºæŸ¥è¯¢ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>api</b>å’Œ<b>internal</b>ç§»åŠ¨åˆ°<b>â“¶åŸºäºsqlåˆ›å»ºgrpcæœåŠ¡</b>æˆ–è€…<b>â“¸åŸºäºprotobufåˆ›å»ºgrpcæœåŠ¡</b>çš„é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤:  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. ä½¿ç”¨ <b>Goland</b> æˆ– <b>VS Code</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯• CRUD apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},j={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº”go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var B=o("VU/8")(U,j,!1,function(e){o("ofVq")},"data-v-f6f34aca",null).exports,L={name:"MicroService",data:function(){return{title:"ç”Ÿæˆservice+handler CRUDä»£ç ",path:"micro-service-handler",helpInfo:'\n      <p>åŸºäºè¡¨sqlç”Ÿæˆçš„service+handler CRUDä»£ç ï¼ŒåŒ…å«äº†grpc+http CRUD apiç›¸å…³ä»£ç ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶å¤¹<b>api</b>å’Œ<b>internal</b>ç§»åŠ¨åˆ°<b>â“ºåŸºäºprotobufåˆ›å»ºgrpc+httpæœåŠ¡</b>çš„é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆgrpcå’Œhttpç›¸å…³ä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. æµ‹è¯•æˆ–å‹æµ‹api:<br />\n        &emsp;â—‹ ä½¿ç”¨ <b>Goland</b> æˆ– <b>VS Code</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–æ€§èƒ½å‹æµ‹grpc apiã€‚<br />\n        &emsp;â—‹ åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯•http apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},H={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº”go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Modelç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var V=o("VU/8")(L,H,!1,function(e){o("NJo9")},"data-v-5ab90dbe",null).exports,G={name:"MicroProtobuf",data:function(){return{title:"ç”Ÿæˆprotobuf CURDæè¿°ä¿¡æ¯",path:"micro-protobuf",helpInfo:'\n      <p>æŠŠè¡¨sqlè½¬æ¢ä¸ºprotobufæè¿°ä¿¡æ¯ï¼Œä¸»è¦åŒ…å« CRUD apiã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>api</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ï¼Œprotoæ–‡ä»¶è¿˜æœ‰ä¸‹é¢ç”¨é€”ï¼š</p>\n      <p style="text-indent:2em;">â— ç”Ÿæˆswaggeræ–‡æ¡£ã€‚\n      <p style="text-indent:2em;">â— ä½œä¸ºprotocçš„è‡ªå®šä¹‰çš„æ’ä»¶ç”Ÿæˆéœ€è¦çš„ä»£ç ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»ºwebæœåŠ¡ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»ºgrpcæœåŠ¡ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»ºgrpc+httpæœåŠ¡ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»ºgrpcç½‘å…³æœåŠ¡ã€‚\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®åº“dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsnåœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},O={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ã€"),o("b",[e._v("tidb")]),e._v("ï¼Œå¡«å†™dsnåœ°å€ï¼Œ"),o("br"),e._v("\n              dsnæ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuserå’Œpasswordä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™sqlite dbæ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"åŒ…å«è·¯ç”±å’Œswagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœå¼€å¯ï¼Œç”Ÿæˆçš„protoæ–‡ä»¶åŒ…å«è·¯ç”±å’Œswaggeræè¿°ä¿¡æ¯ã€‚"),o("br"),e._v("\n              å¦‚æœå…³é—­ï¼Œåˆ™ä¸åŒ…å«è·¯ç”±å’Œswaggeræè¿°ä¿¡æ¯ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„CRUD apiä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„CRUD apiåŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªçš„apiï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var K=o("VU/8")(G,O,!1,function(e){o("w+96")},"data-v-276de519",null).exports,Y={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>â“·åŸºäºprotobufåˆ›å»ºçš„webæœåŠ¡</b> ç”Ÿæˆäº†é€šç”¨çš„webæœåŠ¡åç«¯ä»£ç ï¼Œè¯¦ç»†çš„å¼€å‘æµç¨‹è¯·æŸ¥çœ‹æ–‡æ¡£ <a href="https://go-sponge.com/zh-cn/web-development-protobuf" target="_blank">webæœåŠ¡å¼€å‘(protobuf)</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/handler/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯•apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹©protoæ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// ç¬¬ä¸€ä¸ªuseræ˜¯go moduleåç§°ï¼Œç¬¬äºŒä¸ªuseræ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "ç™»å½•",\n      description: "ä½¿ç”¨é‚®ç®±ç™»å½•",\n    };\n  }\n\n  // æ³¨æ„ï¼šä¸‹é¢ä¸¤ç±»rpcä¼šè¢«å¿½ç•¥ç”Ÿæˆhttpç›¸å…³ä»£ç \n  //    1. åœ¨rpcæ²¡æœ‰è®¾ç½®google.api.httpï¼Œä¾‹å¦‚ SayHi\n  //    2. rpcå±äºstreamç±»å‹ï¼Œä¾‹å¦‚ ClientSteamã€ServerSteamã€BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},J={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/zh-cn/web-development-protobuf",target:"_blank"}},[e._v("â“·åŸºäºprotobufåˆ›å»ºwebæœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          ç”Ÿæˆé€šç”¨çš„webæœåŠ¡åç«¯ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"protoæ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹protobufæ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹©protoæ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"dockeré•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              dockeré•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»ºdockeré•œåƒã€k8sçš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨dockerå®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œdockerä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              gitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var Q=o("VU/8")(Y,J,!1,function(e){o("KbEY")},"data-v-c8d3ca4a",null).exports,X={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>â“¸åŸºäºprotobufåˆ›å»ºgrpcæœåŠ¡</b> ç”Ÿæˆäº†é€šç”¨çš„grpcæœåŠ¡ä»£ç ï¼Œè¯¦ç»†çš„å¼€å‘æµç¨‹è¯·æŸ¥çœ‹æ–‡æ¡£ <a href="https://go-sponge.com/zh-cn/microservice-development-protobuf" target="_blank">grpcæœåŠ¡å¼€å‘(protobuf)</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. ä½¿ç”¨ <b>Goland</b> æˆ– <b>VS Code</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹©protoæ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\n// ç¬¬ä¸€ä¸ªuseræ˜¯go moduleåç§°ï¼Œç¬¬äºŒä¸ªuseræ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/zh-cn/microservice-development-protobuf",target:"_blank"}},[e._v("â“¸åŸºäºprotobufåˆ›å»ºgrpcæœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          ç”Ÿæˆé€šç”¨çš„å¾®æœåŠ¡é¡¹ç›®ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"protoæ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹protobufæ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹©protoæ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"dockeré•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              dockeré•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»ºdockeré•œåƒã€k8sçš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨dockerå®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œdockerä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              gitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ee=o("VU/8")(X,Z,!1,function(e){o("c+Md")},"data-v-eb80721e",null).exports,te={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>â“ºåŸºäºprotobufåˆ›å»ºgrpc+httpæœåŠ¡</b> ç”Ÿæˆäº†é€šç”¨çš„grpc+httpæœåŠ¡ä»£ç ï¼Œè¯¦ç»†çš„å¼€å‘æµç¨‹è¯·æŸ¥çœ‹æ–‡æ¡£ <a href="https://go-sponge.com/zh-cn/microservice-development-mix-protobuf" target="_blank">grpc+httpæœåŠ¡å¼€å‘(protobuf)</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. æµ‹è¯•æˆ–å‹æµ‹api:<br />\n        &emsp;â—‹ ä½¿ç”¨ <b>Goland</b> æˆ– <b>VS Code</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–æ€§èƒ½å‹æµ‹grpc apiã€‚<br />\n        &emsp;â—‹ åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯•http apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹©protoæ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// ç¬¬ä¸€ä¸ªuseræ˜¯go moduleåç§°ï¼Œç¬¬äºŒä¸ªuseræ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "ç™»å½•",\n      description: "ä½¿ç”¨é‚®ç®±ç™»å½•",\n    };\n  }\n\n  // æ³¨æ„ï¼šä¸‹é¢ä¸¤ç±»rpcä¼šè¢«å¿½ç•¥ç”Ÿæˆhttpç›¸å…³ä»£ç \n  //    1. åœ¨rpcæ²¡æœ‰è®¾ç½®google.api.httpï¼Œä¾‹å¦‚ SayHi\n  //    2. rpcå±äºstreamç±»å‹ï¼Œä¾‹å¦‚ ClientSteamã€ServerSteamã€BidiSteam\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},oe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/zh-cn/microservice-development-mix-protobuf",target:"_blank"}},[e._v("â“ºåŸºäºprotobufåˆ›å»ºgrpc+httpæœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          ç”Ÿæˆé€šç”¨çš„å¾®æœåŠ¡é¡¹ç›®ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"protoæ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹protobufæ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹©protoæ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"dockeré•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              dockeré•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»ºdockeré•œåƒã€k8sçš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨dockerå®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œdockerä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              gitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var re=o("VU/8")(te,oe,!1,function(e){o("mdJ5")},"data-v-71806528",null).exports,ie={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>â“¹åŸºäºprotobufåˆ›å»ºçš„grpcç½‘å…³æœåŠ¡</b> ç”Ÿæˆäº†ç”¨äºæŠŠhttpè¯·æ±‚è½¬æ¢ä¸ºgrpcè¯·æ±‚çš„æœåŠ¡ä»£ç ï¼Œè¯¦ç»†çš„å¼€å‘æµç¨‹è¯·æŸ¥çœ‹æ–‡æ¡£ <a href="https://go-sponge.com/zh-cn/rpc-gateway-development-protobuf" target="_blank">grpcç½‘å…³æœåŠ¡å¼€å‘</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç ï¼š<b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡ï¼š<b style="color: green">make run</b></p>\n      <p>5. å¤åˆ¶ <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> åˆ°æµè§ˆå™¨æµ‹è¯•apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥go moduleåç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹©protoæ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// ç¬¬ä¸€ä¸ªuseræ˜¯go moduleåç§°ï¼Œç¬¬äºŒä¸ªuseræ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "ç™»å½•",\n      description: "ä½¿ç”¨é‚®ç®±ç™»å½•",\n    };\n  }\n\n  // æ³¨æ„ï¼šä¸‹é¢ä¸¤ç±»rpcä¼šè¢«å¿½ç•¥ç”Ÿæˆhttpç›¸å…³ä»£ç \n  //    1. åœ¨rpcæ²¡æœ‰è®¾ç½®google.api.httpï¼Œä¾‹å¦‚ SayHi\n  //    2. rpcå±äºstreamç±»å‹ï¼Œä¾‹å¦‚ ClientSteamã€ServerSteamã€BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},le={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/zh-cn/rpc-gateway-development-protobuf",target:"_blank"}},[e._v("â“¹åŸºäºprotobufåˆ›å»ºgrpcç½‘å…³æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("ç”Ÿæˆgrpcç½‘å…³æœåŠ¡é¡¹ç›®ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"protoæ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹protobufæ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹©protoæ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"moduleåç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.modæ–‡ä»¶çš„moduleåç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"dockeré•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              dockeré•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»ºdockeré•œåƒã€k8sçš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨dockerå®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œdockerä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              gitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ae=o("VU/8")(ie,le,!1,function(e){o("QGuy")},"data-v-39e37d58",null).exports,se={name:"YamlConfig",data:function(){return{title:"ç”Ÿæˆconfigä»£ç ",path:"yaml-config",helpInfo:"\n      <p>æŠŠyamlé…ç½®è½¬ä¸ºgo structï¼Œå¹¶åŒ…å«è¯»å–yamlé…ç½®çš„ä»£ç ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™æ›¿æ¢å®ƒã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"è¯·é€‰æ‹©yamlæ–‡ä»¶",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ne={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yamlæ–‡ä»¶",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("ç‚¹å‡»é€‰æ‹©yamlæ–‡ä»¶")]),e._v("\n              æˆ–å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var ce=o("VU/8")(se,ne,!1,function(e){o("YY2o")},"data-v-427c08fc",null).exports,de={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),mircoServiceFrameworkImageSrc:o("qynW")}}},me={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"50px","line-height":"150%"}},[e._v("\n      "+e._s(e.$t("home.text1"))+"\n    ")]),e._v(" "),o("p",[e._v("\n      Github repo:\n      "),o("a",{attrs:{href:"https://github.com/zhufuyi/sponge",target:"_blank"}},[e._v("https://github.com/zhufuyi/sponge")])]),e._v(" "),o("p",[e._v("\n      Documentation:\n      "),o("a",{attrs:{href:"https://go-sponge.com",target:"_blank"}},[e._v("https://go-sponge.com")])]),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text4")))]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text5")))]),e._v(" "),o("div",{staticClass:"microservices-image"},[o("el-image",{attrs:{src:e.mircoServiceFrameworkImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var ue=o("VU/8")(de,me,!1,function(e){o("bkuH")},null,null).exports,pe={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var i=this,l={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,l,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,l=o["content-disposition"],a=new Blob([t],{type:o["content-type"]}),s=document.createElement("a"),n=window.URL.createObjectURL(a);s.href=n,s.download=decodeURI(l),s.style.display="none",document.body.appendChild(s),s.click(),s.parentNode.removeChild(s),window.URL.revokeObjectURL(n),i.dialogContent=r,i.downloadStatusDialogVisible=!0,i.$emit("update-is-downloading",!1)}).catch(function(e){console.log(e);var t=e.response.headers;""!=t["err-msg"]?i.$message.error(t["err-msg"]):i.$message.error(e.message),i.$emit("update-is-downloading",!1)})}}},ve={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"Downloaded Successfully",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("Help for use:")]),e._v(" "),o("div",{staticStyle:{padding:"10px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var be=o("VU/8")(pe,ve,!1,function(e){o("7O3S")},"data-v-73feaec2",null).exports,fe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"monolithic application repository (monolith)\nor microservices multi-repository (muti-repo) directory structure",width:"75%",top:"7vh",visible:e.isShowMutiDialog},on:{"update:visible":function(t){e.isShowMutiDialog=t}}},[o("pre",[e._v(e._s(e.mutiRepoText))])]),e._v(" "),o("el-dialog",{attrs:{title:"Microservice monolithic repository directory structure (also known as large repository directory structure)",width:"80%",visible:e.isShowMonoDialog},on:{"update:visible":function(t){e.isShowMonoDialog=t}}},[o("pre",[e._v(e._s(e.monoRepoText))])])],1)},staticRenderFns:[]};var he=o("VU/8")({name:"ShowRepoDir",computed:{mutiRepoFormattedText:function(){return this.mutiRepoText.replace(/\n/g,"<br>")}},data:function(){return{isShowMutiDialog:!1,isShowMonoDialog:!1,mutiRepoText:" .\nâ”œâ”€â”€ api            # Protobuf files and generated * pb.go directory.\nâ”œâ”€â”€ assets         # Store various static resources, such as images, markdown files, etc.\nâ”œâ”€â”€ cmd            # Program entry directory.\nâ”œâ”€â”€ configs        # Directory for configuration files.\nâ”œâ”€â”€ deployments    # Bare metal, docker, k8s deployment script directory.\nâ”œâ”€â”€ docs           # Directory for API interface Swagger documentation.\nâ”œâ”€â”€ internal       # Directory for business logic code.\nâ”‚     â”œâ”€â”€ cache        # Cache directory wrapped around business logic.\nâ”‚     â”œâ”€â”€ config       # Directory for Go structure configuration files.\nâ”‚     â”œâ”€â”€ dao          # Data access directory.\nâ”‚     â”œâ”€â”€ ecode        # Directory for system error codes and custom business error codes.\nâ”‚     â”œâ”€â”€ handler      # Directory for implementing HTTP business functionality.\nâ”‚     â”œâ”€â”€ model        # Database model directory.\nâ”‚     â”œâ”€â”€ routers      # HTTP routing directory.\nâ”‚     â”œâ”€â”€ rpcclient    # Directory for client-side code that connects to grpc services.\nâ”‚     â”œâ”€â”€ server       # Directory for creating services, including HTTP and grpc.\nâ”‚     â”œâ”€â”€ service      # Directory for implementing grpc business functionality.\nâ”‚     â””â”€â”€ types        # Directory for defining request and response parameter structures for HTTP.\nâ”œâ”€â”€ pkg            # Directory for shared libraries.\nâ”œâ”€â”€ scripts        # Directory for scripts.\nâ”œâ”€â”€ test           # Directory for scripts required for testing services  and test SQL.\nâ”œâ”€â”€ third_party    # Directory for third-party protobuf files or external helper programs.\nâ”œâ”€â”€ Makefile       # Develop, test, deploy related command sets.\nâ”œâ”€â”€ go.mod         # Go module dependencies and version control file.\nâ””â”€â”€ go.sum         # Go module dependencies key and checksum file.\n      ",monoRepoText:" .\nâ”œâ”€â”€ api\nâ”‚    â”œâ”€â”€ server1       # Protobuf files and generated *pb.go directory for service 1.\nâ”‚    â”œâ”€â”€ server2       # Protobuf files and generated *pb.go directory for service 2.\nâ”‚    â”œâ”€â”€ server3       # Protobuf files and generated *pb.go directory for service 3.\nâ”‚    â””â”€â”€ ...\nâ”œâ”€â”€ server1        # Code directory for Service 1, it has a similar structure to the microservice multi repo directory.\nâ”œâ”€â”€ server2        # Code directory for Service 2, it has a similar structure to the microservice multi repo directory.\nâ”œâ”€â”€ server3        # Code directory for Service 3, it has a similar structure to the microservice multi repo directory.\nâ”œâ”€â”€ ...\nâ”œâ”€â”€ third_party    # Third-party protobuf files.\nâ”œâ”€â”€ go.mod         # Go module dependencies and version control file.\nâ””â”€â”€ go.sum         # Go module dependencies' checksums and hash keys.\n\n"}}},fe,!1,function(e){o("IyL6")},"data-v-4a176e98",null).exports,ge={name:"WebHTTP",data:function(){return{title:"",path:"web-http",helpInfo:'\n      <p><b>â“µ Create web service based on sql</b> generates the complete web service backend code including the CRUD api, see the documentation for details of the development steps: <a href="https://go-sponge.com/web-development-sql" target="_blank">web service development (sql)</a>.</p>\n      <br />\n      <p>1. Unzip the file.</p>\n      <p>2. Open a terminal and execute the command to generate the swagger documentation:   <b style="color: green">make docs</b></p>\n      <p>3. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be,ShowRepoDir:he},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},_e={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/web-development-sql",target:"_blank"}},[e._v("â“µ Create web service based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate complete web service backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file. "),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [Generate Handler CRUD Code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              service"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple service codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different services are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of service code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple service codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different services can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this service, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var ye=o("VU/8")(ge,_e,!1,function(e){o("bgVd")},"data-v-762ef936",null).exports,we={name:"WebHandler",data:function(){return{title:"Generate handler CRUD code",path:"web-handler",helpInfo1:'\n      <p>Generate handler code based on sql, contains CRUD api, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folder folders <b>internal</b> to a sql based create web service project code folder.</p>\n      <p>2. open a terminal and execute the command:  <b style="color: green">make docs</b></p>\n      <p>3. compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo2:'\n      <p>Generate protobuf and handler code based on sql, contains CRUD api, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folders <b>api</b> and <b>internal</b> to a protobuf based create web service project code folder.</p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run services:  <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;t.helpInfo=t.helpInfo2,i="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;i="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Fe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" service here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"protobuf type"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If it is disable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "â“µ Create web service based on sql".'),o("br"),e._v("\n              If it is enable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "â“· Create web service based on protobuf".\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Ce=o("VU/8")(we,Fe,!1,function(e){o("3z25")},"data-v-2f14e34c",null).exports,De={name:"WebCache",data:function(){return{title:"generate cache code",path:"web-cache",helpInfo:"\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1,isNeedCustomKeyPrefix:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],cacheName:[{required:!0,message:"please type the cache name",trigger:"blur"}],keyName:[{required:!0,message:"please type the key name",trigger:"blur"}],keyType:[{required:!0,message:"please select the go type of key",trigger:"blur"}],valueName:[{required:!0,message:"please type the value name",trigger:"blur"}],valueType:[{required:!0,message:"please select the go type of value",trigger:"blur"}]},keyTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}],valueTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}]}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(""==t.ruleForm.keyType)return t.$message.error("Go type of the key cannot be empty"),!1;if(""==t.ruleForm.valueType)return t.$message.error("Go type of the value cannot be empty"),!1;if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Se={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" service here.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"cache name",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),e.ruleForm.isNeedCustomKeyPrefix?o("el-form-item",{attrs:{label:"cache key prefix",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. user:token"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"key name",prop:"keyName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"e.g. id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"Go type of key",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType",t)},expression:"ruleForm.keyType"}},e._l(e.keyTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"value name",prop:"valueName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"e.g. token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"Go type of value",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType",t)},expression:"ruleForm.valueType"}},e._l(e.valueTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:" custom cache key prefix "}},[o("el-switch",{model:{value:e.ruleForm.isNeedCustomKeyPrefix,callback:function(t){e.$set(e.ruleForm,"isNeedCustomKeyPrefix",t)},expression:"ruleForm.isNeedCustomKeyPrefix"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default key name stored in the cache service is\n              "),o("b",[e._v("cache name: key value")]),o("br"),o("br"),e._v("\n              If this option is enabled, setting a custom cache key prefix\n              will change the"),o("br"),e._v("key name to\n              "),o("b",[e._v("custom cache key prefix: key value")]),e._v(".\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var xe=o("VU/8")(De,Se,!1,function(e){o("hx8n")},"data-v-ac41ca32",null).exports,Ne={name:"WebDao",data:function(){return{title:"Generate dao CRUD code",path:"web-dao",helpInfo:"\n      <p>Generate dao code based on table sql, contains CRUD api, arbitrary condition paging query, caching. </p>\n      <br />\n      <p>1. Move the folder <b>internal</b> to your project code folder.</p>\n      <p>2. Invoke dao code in handler or service.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;i="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ke={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" service here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Re=o("VU/8")(Ne,ke,!1,function(e){o("GhH6")},"data-v-3b9e3782",null).exports,ze={name:"WebModel",data:function(){return{title:"Generate Model Code",path:"web-model",helpInfo:"\n      <p>Generate the corresponding go structure based on the table sql.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ae={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var qe=o("VU/8")(ze,Ae,!1,function(e){o("I0o5")},"data-v-037c1e66",null).exports,$e={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>â“¶ Create grpc service based on sql</b> generates a complete microservice code including CRUD api, see the documentation for details of the development steps: <a href="https://go-sponge.com/microservice-development-sql" target="_blank">GRPC service development (sql)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, test or performance test the api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be,ShowRepoDir:he},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Me={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/microservice-development-sql",target:"_blank"}},[e._v("â“¶ Create grpc service based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate complete microservices project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [generate service CRUD code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              service"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple service codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different services are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of service code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple service codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different services can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this service, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var Te=o("VU/8")($e,Me,!1,function(e){o("4OiW")},"data-v-5e7af25e",null).exports,Ie={name:"MicroRPCConn",data:function(){return{title:"Generate grpc connection code",path:"micro-rpc-conn",helpInfo:"\n      <p>The grpc service connection code includes common service governance features such as service discovery, load balancing, flow limiting, melting, link tracing, etc.</p>\n      <br />\n      <p>Unzip the file and move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],rpcServerNames:[{required:!0,message:"please type the name of the grpc service",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Pe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" service here.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"grpc service name",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multiple grpc services support"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you want to generate code to connect multiple grpc\n              services,"),o("br"),e._v("\n              grpc service names are separated by commas."),o("br"),e._v("\n              example: service1,service2,service3\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var We=o("VU/8")(Ie,Pe,!1,function(e){o("nsIk")},"data-v-57f57da4",null).exports,Ee={name:"MicroService",data:function(){return{title:"Generate service CRUD code",path:"micro-service",helpInfo:'\n      <p>Generate service code based on table sql, including grpc CRUD api and test code, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the code file</p>\n      <p>2. Move the folders <b>api</b> and <b>internal</b> to your grpc service code folder.</p>\n      <p>3. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test the CRUD api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ue={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" service here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var je=o("VU/8")(Ee,Ue,!1,function(e){o("bVxU")},"data-v-3f2c49e5",null).exports,Be={name:"MicroService",data:function(){return{title:"Generate service+handler CRUD code",path:"micro-service-handler",helpInfo:'\n      <p>Generate service+handler code based on table sql, the code contains grpc+http CRUD api related code.</p>\n      <br />\n      <p>1. Unzip the code file, move the folders <b>api</b> and <b>internal</b> to the project code folder "â“ºcreate grpc+http services based on protobuf" </p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Test or performance test api:<br />\n        &emsp;â—‹ Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test grpc api.<br />\n        &emsp;â—‹ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n        ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Le={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" service here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var He=o("VU/8")(Be,Le,!1,function(e){o("oQBM")},"data-v-487fe87a",null).exports,Ve={name:"MicroProtobuf",data:function(){var e;return e={title:"Generate protobuf CRUD description information",path:"micro-protobuf",helpInfo:'\n      <p>Converting table sql to protobuf description information, mainly contains CRUD api.</p>\n      <br />\n      <p>Move the folder <b>api</b> to your project code folder, the proto file is also used for the following purposes.: </p>\n      <p style="text-indent:2em;">â— generate swagger documents.\n      <p style="text-indent:2em;">â— generate the required code as a custom plug-in for protoc.\n      <p style="text-indent:2em;">â— create web services.\n      <p style="text-indent:2em;">â— create grpc services.\n      <p style="text-indent:2em;">â— create grpc+http services.\n      <p style="text-indent:2em;">â— create grpc gateway services.\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1},f()(e,"isSelectedAllTable",!1),f()(e,"dbDriverNames",[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]),e},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table names success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ge={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",clearable:"",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"include route and swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If enabled, the generated proto file include the route and\n              "),o("br"),e._v("\n              swagger description information."),o("br"),e._v("\n              if disable, route and swagger description information are not\n              include.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Oe=o("VU/8")(Ve,Ge,!1,function(e){o("qPk4")},"data-v-5c9f53c0",null).exports,Ke={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>â“· Create web service based on protobuf</b> generates generic web service backend code, see the documentation for details of the development steps: <a href="https://go-sponge.com/web-development-protobuf" target="_blank">web service development (protobuf)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code: <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/handler/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the service name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:be,ShowRepoDir:he},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+"--server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ye={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/web-development-protobuf",target:"_blank"}},[e._v("â“· Create web service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate generic web service backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              service"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple service codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different services are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of service code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple service codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different services can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this service, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var Je=o("VU/8")(Ke,Ye,!1,function(e){o("3Eg5")},"data-v-8cf14c9e",null).exports,Qe={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>â“¸ Create grpc service based on protobuf</b> generates generic grpc service code, see the documentation for details of the development steps: <a href="https://go-sponge.com/microservice-development-protobuf" target="_blank">GRPC service development (protobuf)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\n// The first user is the go module name, the second user is the service name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:be,ShowRepoDir:he},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Xe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/microservice-development-protobuf",target:"_blank"}},[e._v("â“¸ Create grpc service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate generic microservice project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              service"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple service codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different services are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of service code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple service codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different services can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this service, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var Ze=o("VU/8")(Qe,Xe,!1,function(e){o("d2P1")},"data-v-05305f77",null).exports,et={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>â“º Create grpc+http service based on protobuf</b> generates generic grpc+http service code, see the documentation for details of the development steps: <a href="https://go-sponge.com/microservice-development-mix-protobuf" target="_blank">GRPC+HTTP service development (protobuf)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open the terminal and execute the command to generate code:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Test or performance test api:<br />\n        &emsp;â—‹ Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test grpc api.<br />\n        &emsp;â—‹ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the service name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "log in with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:be,ShowRepoDir:he},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},tt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/microservice-development-mix-protobuf",target:"_blank"}},[e._v("â“º Create grpc+http service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate generic microservice project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              service"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple service codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different services are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of service code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple service codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different services can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this service, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ot=o("VU/8")(et,tt,!1,function(e){o("xFBp")},"data-v-29ae9ca2",null).exports,rt={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>â“¹ Create grpc gateway service based on protobuf</b> generates service code for converting http requests to grpc requests, see the documentation for details of the development steps: <a href="https://go-sponge.com/rpc-gateway-development-protobuf" target="_blank">GRPC gateway service development</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code: <b style="color: green">make proto</b></p>\n      <p>3. Open <span style="color: chocolate">internal/service/xxx.go</span> file, replace <span style="color: chocolate">panic("implement me")</span> according to template code example. </p>\n      <p>4. Compile and run services.<b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser, and test api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the service name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:be,ShowRepoDir:he},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},it={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/rpc-gateway-development-protobuf",target:"_blank"}},[e._v("â“¹ Create grpc gateway service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate grpc gateway service project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service ğŸ¡† your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              service"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple service codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different services are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of service code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple service codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different services can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this service, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var lt=o("VU/8")(rt,it,!1,function(e){o("f8TA")},"data-v-6e0b3ffc",null).exports,at={name:"YamlConfig",data:function(){return{title:"Generate config code",path:"yaml-config",helpInfo:"\n      <p>Converts a yaml configuration to a go struct and includes code to read the yaml configuration.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder, if the configuration code already exists, replace it.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"please select a yaml file",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:be},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},st={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml file",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Click to select a yaml file")]),o("br"),e._v("\n              or drag and drop the file here\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var nt=o("VU/8")(at,st,!1,function(e){o("WUOy")},"data-v-434d259c",null).exports;r.default.use(s.a);var ct=new s.a({mode:"history",routes:[{path:"*",redirect:"/ui"},{path:"/ui",component:d},{path:"/ui/web-http",component:w},{path:"/ui/web-handler",component:D},{path:"/ui/web-cache",component:N},{path:"/ui/web-dao",component:z},{path:"/ui/web-model",component:$},{path:"/ui/micro-rpc",component:I},{path:"/ui/micro-rpc-conn",component:E},{path:"/ui/micro-rpc-pb",component:ee},{path:"/ui/micro-grpc-http-pb",component:re},{path:"/ui/micro-rpc-gw-pb",component:ae},{path:"/ui/micro-service",component:B},{path:"/ui/micro-service-handler",component:V},{path:"/ui/micro-protobuf",component:K},{path:"/ui/web-http-pb",component:Q},{path:"/ui/yaml-config",component:ce},{path:"/ui/download",component:v},{path:"/en/ui",component:ue},{path:"/en/ui/web-http",component:ye},{path:"/en/ui/web-handler",component:Ce},{path:"/en/ui/web-cache",component:xe},{path:"/en/ui/web-dao",component:Re},{path:"/en/ui/web-model",component:qe},{path:"/en/ui/micro-rpc",component:Te},{path:"/en/ui/micro-rpc-conn",component:We},{path:"/en/ui/micro-rpc-pb",component:Ze},{path:"/en/ui/micro-grpc-http-pb",component:ot},{path:"/en/ui/micro-rpc-gw-pb",component:lt},{path:"/en/ui/micro-service",component:je},{path:"/en/ui/micro-service-handler",component:He},{path:"/en/ui/micro-protobuf",component:Oe},{path:"/en/ui/web-http-pb",component:Je},{path:"/en/ui/yaml-config",component:nt},{path:"/en/ui/download",component:be}]}),dt=(o("tvR6"),o("zL8q")),mt=o.n(dt),ut=o("Dd8w"),pt=o.n(ut),vt=o("TXmL"),bt=o("wUZ8"),ft=o.n(bt),ht=o("Vi3T"),gt=o.n(ht);r.default.use(vt.a);var _t={en:pt()({},ft.a,{navMenu:{webType:"Web",webHttp:"Create web service",microRpc:"Create grpc service",microType:"Microservice",webHttpPb:"Create web service",microRpcGwPb:"Create grpc gateway service",microrpcPb:"Create grpc service",microGRPCHTTPPb:"Create grpc+http service",microServiceHandler:"Generate service+handler CRUD code",microService:"Generate service CRUD code",wehHandler:"Generate handler CRUD code",webDao:"Generate dao CRUD code",webModel:"Generate model code",microProtobuf:"Generate protobuf CRUD code",yamlConfig:"Generate configuration code",microRpcConn:"Generate grpc connection code",webCache:"Generate cache code"},footer:{text1:"If it helps you, give it a ",text2:"",text3:""},home:{text1:'Sponge is a powerful basic development framework that integrates automatic code generation, Gin and GRPC. Sponge has a rich set of code generation commands, generating different functional code can be combined into a complete service (similar to the way that artificially broken sponge cells can automatically recombine into a new sponge). Sponge provides one-stop project development (code generation, development, testing, api documentation, deployment), it greatly improves development efficiency and reduces development difficulty, develop high-quality projects with a "low code approach".',text2:"Github: ",text3:"Documentation: ",text3_1:"Video tutorials: ",text3_2:"",text4:"The code generation framework is shown in the following figure, it corresponding to the menu on the left. There are mainly two ways to generate code based on sql and protobuf. sql supports databases mysql, mongodb, postgresql, tidb and sqlite.",text4_1:"The service code created by sponge supports two types of project code repositories: 1.monolithic application repository (monolith) or microservices multi-repository (multi-repo), 2.microservices monolithic repository (mono-repo).",text5:"The code for sponge creation service corresponds to the framework diagram:"}}),cn:pt()({},gt.a,{navMenu:{webType:"Web",webHttp:"åˆ›å»ºwebæœåŠ¡",wehHandler:"ç”Ÿæˆhandler CRUDä»£ç ",microType:"å¾®æœåŠ¡",microRpc:"åˆ›å»ºgrpcæœåŠ¡",microService:"ç”Ÿæˆservice CRUDä»£ç ",webHttpPb:"åˆ›å»ºwebæœåŠ¡",microRpcGwPb:"åˆ›å»ºgrpcç½‘å…³æœåŠ¡",microrpcPb:"åˆ›å»ºgrpcæœåŠ¡",microGRPCHTTPPb:"åˆ›å»ºgrpc+httpæœåŠ¡",microServiceHandler:"ç”Ÿæˆservice+handler CRUDä»£ç ",webDao:"ç”Ÿæˆdao CRUDä»£ç ",webModel:"ç”Ÿæˆmodelä»£ç ",microProtobuf:"ç”Ÿæˆprotobuf CRUDä»£ç ",yamlConfig:"ç”Ÿæˆconfigä»£ç ",microRpcConn:"ç”ŸæˆgrpcæœåŠ¡è¿æ¥ä»£ç ",webCache:"ç”Ÿæˆcacheä»£ç "},footer:{text1:"å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©ç»™ä¸ª",text2:" ï¼Œæ¬¢è¿åŠ å…¥",text3:"go spongeå¾®ä¿¡äº¤æµç¾¤ã€‚"},home:{text1:'sponge æ˜¯ä¸€ä¸ªé›†æˆäº† è‡ªåŠ¨ç”Ÿæˆä»£ç ã€Ginå’ŒGRPC çš„å¼ºå¤§çš„å¼€å‘æ¡†æ¶ã€‚spongeæ‹¥æœ‰ä¸°å¯Œçš„ç”Ÿæˆä»£ç å‘½ä»¤ï¼Œç”Ÿæˆä¸åŒçš„åŠŸèƒ½ä»£ç å¯ä»¥ç»„åˆæˆå®Œæ•´çš„æœåŠ¡(ç±»ä¼¼äººä¸ºæ‰“æ•£çš„æµ·ç»µç»†èƒå¯ä»¥è‡ªåŠ¨é‡ç»„æˆä¸€ä¸ªæ–°çš„æµ·ç»µ)ã€‚spongeæä¾›äº†ä¸€ç«™å¼é¡¹ç›®å¼€å‘(ç”Ÿæˆä»£ç ã€å¼€å‘ã€æµ‹è¯•ã€apiæ–‡æ¡£ã€éƒ¨ç½²)ï¼Œå¤§å¹…æé«˜äº†å¼€å‘æ•ˆç‡å’Œé™ä½äº†å¼€å‘éš¾åº¦ï¼Œä»¥"ä½ä»£ç æ–¹å¼"å¼€å‘é«˜è´¨é‡é¡¹ç›®ã€‚',text2:"githubåœ°å€ï¼š",text3:"å¼€å‘æ–‡æ¡£ï¼š",text3_1:"è§†é¢‘æ•™ç¨‹ï¼š",text3_2:"(æ³¨ï¼šè§†é¢‘æ¼”ç¤ºä½¿ç”¨sponge v1.3.12ç‰ˆæœ¬ï¼Œè€Œæ–°ç‰ˆæœ¬çš„ç”Ÿæˆä»£ç é¡µé¢ç•¥æœ‰ä¸åŒï¼Œå»ºè®®ç»“åˆæ–‡æ¡£æ•™ç¨‹ä½¿ç”¨ã€‚)",text4:"ç”Ÿæˆä»£ç æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸»è¦æœ‰sqlå’Œprotobufä¸¤ç§æ–¹å¼ç”Ÿæˆä»£ç ï¼Œå…¶ä¸­sqlæ”¯æŒæ•°æ®åº“mysqlã€mongodbã€postgresqlã€tidbã€sqliteã€‚",text4_1:"spongeåˆ›å»ºçš„æœåŠ¡ä»£ç æ”¯æŒä¸¤ç§ç±»å‹ä»£ç ä»“åº“ï¼š1.å•ä½“åº”ç”¨å•ä½“ä»“åº“(monolith)æˆ–å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ï¼› 2.å¾®æœåŠ¡å•ä½“ä»“åº“(mono-repo)ã€‚",text5:"spongeåˆ›å»ºçš„æœåŠ¡ä»£ç å¯¹åº”æ¡†æ¶å›¾ï¼š"}})},yt=new vt.a({locale:"cn",messages:_t});r.default.use(mt.a,{i18n:function(e,t){return yt.t(e,t)}}),r.default.config.productionTip=!1,new r.default({el:"#app",i18n:yt,router:ct,components:{App:a},template:"<App/>"})},NJo9:function(e,t){},QGuy:function(e,t){},WUOy:function(e,t){},X1EN:function(e,t){},X4KW:function(e,t,o){e.exports=o.p+"static/img/sponge-framework.c71e90f.png"},YY2o:function(e,t){},bVxU:function(e,t){},bgVd:function(e,t){},bkuH:function(e,t){},"c+Md":function(e,t){},d2P1:function(e,t){},ebUW:function(e,t,o){e.exports=o.p+"static/img/wechat.4ce8c69.jpg"},f8TA:function(e,t){},hIB5:function(e,t,o){e.exports=o.p+"static/img/go-sponge-logo.8d1efd3.png"},hx8n:function(e,t){},mdJ5:function(e,t){},nsIk:function(e,t){},oQBM:function(e,t){},ofVq:function(e,t){},qPk4:function(e,t){},qynW:function(e,t,o){e.exports=o.p+"static/img/microservices-framework.688c170.png"},rL66:function(e,t){},tuuv:function(e,t){},tvR6:function(e,t){},"w+96":function(e,t){},wAci:function(e,t){},wUZd:function(e,t){},xFBp:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.545f8e7ca04ede9067fa.js.map